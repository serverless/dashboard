#!/usr/bin/env python

import os
import sys
import logging

logging.basicConfig(level=logging.DEBUG)

sys.path.insert(0, "/opt/python")
sys.path.insert(0, "/opt/python/lib/python{}.{}/site-packages".format(sys.version_info.major, sys.version_info.minor))
sys.path.insert(0, "/var/runtime")
sys.path.insert(0, "/var/task")

try:
    from serverless.aws_lambda_otel_extension.external import server
except ImportError:
    raise

# Quick and easy way to remove buffering on stdout - this is useful for debugging
sys.stdout = sys.stderr

print(os.path.basename(sys.argv[0]), "starting")

server.start()
